{"ast":null,"code":"import _asyncToGenerator from\"/Users/ted/Desktop/jbook/packages/local-client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/ted/Desktop/jbook/packages/local-client/node_modules/@babel/runtime/regenerator/index.js\";export var unpkgPathPlugin=function unpkgPathPlugin(){return{name:'unpkg-path-plugin',setup:function setup(build){// Handle root entry file index.ts\nbuild.onResolve({filter:/(^index\\.js$)/},function(){return{path:'index.js',namespace:'a'};});// Handle relative paths in a module\nbuild.onResolve({filter:/^\\.+\\//},function(args){return{namespace:'a',path:new URL(args.path,'https://unpkg.com'+args.resolveDir+'/').href};});// Handle main file of a module\nbuild.onResolve({filter:/.*/},/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(args){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt(\"return\",{namespace:'a',path:\"https://unpkg.com/\".concat(args.path)});case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());}};};","map":{"version":3,"sources":["/Users/ted/Desktop/jbook/packages/local-client/src/bundler/plugins/unpkg-path-plugin.ts"],"names":["unpkgPathPlugin","name","setup","build","onResolve","filter","path","namespace","args","URL","resolveDir","href"],"mappings":"2QAEA,MAAO,IAAMA,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CACjC,MAAO,CACHC,IAAI,CAAE,mBADH,CAEHC,KAFG,gBAEGC,KAFH,CAE+B,CAC9B;AACAA,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,eAAV,CAAhB,CAA6C,UAAM,CAC/C,MAAO,CAAEC,IAAI,CAAE,UAAR,CAAoBC,SAAS,CAAE,GAA/B,CAAP,CACH,CAFD,EAIA;AACAJ,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,QAAV,CAAhB,CAAsC,SAACG,IAAD,CAAe,CACjD,MAAO,CACHD,SAAS,CAAE,GADR,CAEHD,IAAI,CAAE,GAAIG,CAAAA,GAAJ,CAAQD,IAAI,CAACF,IAAb,CAAmB,oBAAsBE,IAAI,CAACE,UAA3B,CAAwC,GAA3D,EAAgEC,IAFnE,CAAP,CAIH,CALD,EAOA;AACAR,KAAK,CAACC,SAAN,CAAgB,CAAEC,MAAM,CAAE,IAAV,CAAhB,0FAAkC,iBAAOG,IAAP,kJACvB,CACHD,SAAS,CAAE,GADR,CAEHD,IAAI,6BAAuBE,IAAI,CAACF,IAA5B,CAFD,CADuB,wDAAlC,gEAMH,CAvBE,CAAP,CAyBH,CA1BM","sourcesContent":["import * as esbuild from 'esbuild-wasm';\n\nexport const unpkgPathPlugin = () => {\n    return {\n        name: 'unpkg-path-plugin',\n        setup(build: esbuild.PluginBuild) {\n            // Handle root entry file index.ts\n            build.onResolve({ filter: /(^index\\.js$)/ }, () => {\n                return { path: 'index.js', namespace: 'a' }\n            });\n\n            // Handle relative paths in a module\n            build.onResolve({ filter: /^\\.+\\// }, (args: any) => {\n                return {\n                    namespace: 'a',\n                    path: new URL(args.path, 'https://unpkg.com' + args.resolveDir + '/').href\n                }\n            });\n\n            // Handle main file of a module\n            build.onResolve({ filter: /.*/ }, async (args: any) => {\n                return {\n                    namespace: 'a',\n                    path: `https://unpkg.com/${args.path}`\n                };\n            });\n        },\n    };\n};\n"]},"metadata":{},"sourceType":"module"}